<div class="container-fluid">
  <div class="row" *ngIf="backgroundService.resume.unassigned_devices.length > 0" (click)="this.routerService.navigate(['/devices'])" style="cursor:pointer;">
    <div class="col-md-12">
      <div class="alert alert-danger" role="alert">
        <i class="fa fa-bullhorn" aria-hidden="true"></i>&nbsp;<b>Hay dispositivos pendientes de asignar a una "Portería / Acceso":</b>&nbsp;&nbsp;&nbsp;&nbsp;{{ backgroundService.resume.unassigned_devices.join(', ') }}
        <br/><small>Click para resolver ahora&nbsp;<i class="fa fa-arrow-right" aria-hidden="true"></i></small>
      </div>
    </div>
  </div>
  <div class="row" *ngIf="backgroundService.resume.places_without_hours.length > 0" (click)="this.routerService.navigate(['/places'])" style="cursor:pointer;">
    <div class="col-md-12">
      <div class="alert alert-warning" role="alert">
        <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>&nbsp;<b>Hay "Plantas / Oficinas" sin definir "Horarios / Tolerancias":</b>&nbsp;&nbsp;&nbsp;&nbsp;{{ backgroundService.resume.places_without_hours.join(', ') }}
        <br/><small>Click para resolver ahora&nbsp;<i class="fa fa-arrow-right" aria-hidden="true"></i></small>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-8">
      <h3>Panorama actual</h3>
    </div>
    <div class="col-md-4">
      <div class="input-group" style="margin-top: -6px;">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon1"><i class="fa fa-map-marker" style="color:#f40b0b"></i>&nbsp; Filtrar por ubicación</span>
        </div>
        <select
              size="1"
              class="form-control"
              [(ngModel)]="filterPlaceId"
              (ngModelChange)="onFilterPlaceChange()">
          <option value="">Organización (todo)</option>
          <option *ngFor="let place of panoramaPorcentajes.places; let i = index" value="{{ place.encrypted_id }}">{{ place.name }}</option>
        </select>
      </div>
    </div> 
  </div>
  <hr class="divider" />
  <div class="row dashboard">
    <div class="col-md-4" *ngIf="panoramaActual.cantidad_presentes !== undefined">
      <div class="card card-style-1">
        <div class="card-header">
          <i class="fa fa-calendar" aria-hidden="true"></i>&nbsp;&nbsp;Ahora
        </div>
        <div class="card-body">
          {{ panoramaActual.dia_nombre }}<br/>
          {{ myDate  |  date:'HH:mm' }} hs
        </div>
      </div>
    </div>
    <div class="col-md-4" *ngIf="panoramaActual.cantidad_presentes !== undefined">
      <div class="card card-style-2">
        <div class="card-header">
          <i class="fa fa-users" aria-hidden="true"></i>&nbsp;&nbsp;Porcentaje asistencia
        </div>
        <div class="card-body percent">
          {{ panoramaActual.porcentaje_asistencia }} %
        </div>
      </div>
    </div>
    <div class="col-md-4" *ngIf="panoramaActual.cantidad_presentes !== undefined">
      <div class="card card-style-3">
        <div class="card-header">
          <i class="fa fa-balance-scale" aria-hidden="true"></i>&nbsp;&nbsp;Balance de asistencia
        </div>
        <div class="card-body">
          {{ panoramaActual.cantidad_presentes }} presenciados<br/>
          {{ panoramaActual.cantidad_ausentes }} ausentes
        </div>
      </div>
    </div>
    <div class="col-md-4" *ngIf="panoramaPorcentajes.porcentaje_7 !== undefined">
      <div class="card card-style-4">
        <div class="card-header">
          <i class="fa fa-bar-chart" aria-hidden="true"></i>&nbsp;&nbsp;Asistencia promedio 7 días
        </div>
        <div class="card-body percent">
          {{ panoramaPorcentajes.porcentaje_7 }} %
        </div>
      </div>
    </div>
    <div class="col-md-4" *ngIf="panoramaPorcentajes.porcentaje_15 !== undefined">
      <div class="card card-style-5">
        <div class="card-header">
          <i class="fa fa-bar-chart" aria-hidden="true"></i>&nbsp;&nbsp;Asistencia promedio 15 días
        </div>
        <div class="card-body percent">
          {{ panoramaPorcentajes.porcentaje_15 }} %
        </div>
      </div>
    </div>
    <div class="col-md-4" *ngIf="panoramaPorcentajes.porcentaje_30 !== undefined">
      <div class="card card-style-6">
        <div class="card-header">
          <i class="fa fa-bar-chart" aria-hidden="true"></i>&nbsp;&nbsp;Asistencia promedio 30 días
        </div>
        <div class="card-body percent">
          {{ panoramaPorcentajes.porcentaje_30 }} %
        </div>
      </div>
    </div>
  </div>
</div>